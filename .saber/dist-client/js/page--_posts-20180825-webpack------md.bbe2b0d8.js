(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{88:function(t,a,s){"use strict";s.r(a);var n=s(0),e=function(t){var a,s,n,e=(n="post",(a={}).internal=s=void 0,a.contentType="markdown",a.slug="20180825-webpack自定义配置",a.content=s,a.title="webpack自定义配置",a.layout=n,a.markdownHeadings=[{text:"四个核心概念:",slug:"四个核心概念",level:2}],a.excerpt="<p><strong>webpack.config.js</strong></p>\n",a.createdAt=new Date(15351552e5),a.updatedAt=new Date(1569293880281),a.type=n,a.permalink="/posts/20180825-webpack自定义配置.html",a.assets={},a.attributes=a,a.prevPost={title:"vue-computed",permalink:"/posts/20180824-vue-computed.html"},a.nextPost={title:"redux-saga",permalink:"/posts/20180911-redux-saga.html"},a),p=t.options.beforeCreate||[];t.options.beforeCreate=[function(){this.$page=e}].concat(p);["layout","transition"].forEach((function(a){var s=t.options.PageComponent;s&&(t.options[a]=s[a]),void 0===t.options[a]&&(t.options[a]=e[a])})),t.options.name="page-wrapper-"+e.slug.replace(/[^0-9a-z\-]/i,"-")},p=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("layout-manager",[s("p",[s("strong",[t._v("webpack.config.js")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":"js"}},[s("pre",{pre:!0,attrs:{class:"saber-highlight-code language-js"}},[s("code",{pre:!0,attrs:{class:"language-js"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" webpack "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// entry: path.join(__dirname, 'src/index.js'),")]),t._v("\n  entry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dist'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bundle.js'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  plugins"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optimize"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("UglifyJsPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      compressor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        warnings"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optimize"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OccurenceOrderPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    loaders"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.css$/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      loaders"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'style'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'css'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])])])]),s("h2",{attrs:{id:"四个核心概念"}},[t._v("四个核心概念:")]),t._v(" "),s("ul",[s("li",[s("p",[s("a",{attrs:{href:"https://www.webpackjs.com/concepts/entry-points/",target:"_blank",rel:"noopener noreferrer"}},[t._v("入口（entry）")]),t._v("，告诉 webpack 应该使用哪个模块，来作为构建其内部依赖图的开始。 可以传入字符串, 数组, 对象")])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://www.webpackjs.com/configuration/output/",target:"_blank",rel:"noopener noreferrer"}},[t._v("出口（output）")]),t._v("，告诉 webpack 在哪里输出它所创建的 bundles，以及如何命名这些文件，默认值为 ./dist")]),t._v(" "),s("ul",[s("li",[t._v("path - 表示输出文件的路径")]),t._v(" "),s("li",[t._v("filename - 表示输出文件的文件名")])])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://www.webpackjs.com/configuration/output/",target:"_blank",rel:"noopener noreferrer"}},[t._v("加载器（loader）")]),t._v("，告诉 webpack 能够去处理那些非 JavaScript 文件（webpack 自身只理解 JavaScript）")])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://www.webpackjs.com/concepts/plugins/",target:"_blank",rel:"noopener noreferrer"}},[t._v("插件（plugin）")]),t._v("，给 webpack 添加更多的功能，使 webpack 更加的灵活和强大，webpack 有两种类型的插件: ①内置插件 ②外置插件")])])]),t._v(" "),s("p",[s("strong",[t._v("package.json")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("vue")])]),t._v(" "),s("li",[s("p",[t._v("vue-loader")]),t._v(" "),s("ul",[s("li",[t._v("作用: 解析和转换 .vue 文件，提取出其中的逻辑代码 script、样式代码 style、以及 html 模版 template，再分别把它们交给对应的 Loader 去处理。")]),t._v(" "),s("li",[t._v("依赖: vue-loader 需要 css-loader 和 vue-template-loader 作为依赖")])])]),t._v(" "),s("li",[s("p",[t._v("css-loader")]),t._v(" "),s("ul",[s("li",[t._v("作用: 加载由 vue-loader 提取出的 CSS 代码")])])]),t._v(" "),s("li",[s("p",[t._v("vue-template-loader")]),t._v(" "),s("ul",[s("li",[t._v("作用: 把 vue-loader 提取出的 HTML 模版编译成对应的可执行的 JavaScript 代码，这和 React 中的 JSX 语法被编译成 JavaScript 代码类似。预先编译好 HTML 模版相对于在浏览器中再去编译 HTML 模版的好处在于性能更好。")])])]),t._v(" "),s("li",[s("p",[t._v("style-loader")])]),t._v(" "),s("li",[s("p",[t._v("url-loader")]),t._v(" "),s("ul",[s("li",[t._v("url-loader 需要 file-loader 作为依赖")])])]),t._v(" "),s("li",[s("p",[t._v("webpack")])]),t._v(" "),s("li",[s("p",[t._v("webpack-dev-server")])]),t._v(" "),s("li",[s("p",[t._v("cross-env")])])]),t._v(" "),s("p",[t._v("项目搭建时遇到的一些坑")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("其中一个是在安装了webpack-dev-server后, 使用npm run dev 的时候报错,")]),t._v(" "),s("p",[t._v("看报错信息以为要安装 webpack-cli, 但是安装后又报另一个错误, 遂去网上查询, 最后 webpack-dev-server的版本从 3.1.5 降到 2.9.7 解决")])])]),t._v(" "),s("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":"shell"}},[s("pre",{pre:!0,attrs:{class:"saber-highlight-code language-shell"}},[s("code",{pre:!0,attrs:{class:"language-shell"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" vue-webpack@1.0.0 dev D:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("practice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("vue-webpack\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" cross-env "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NODE_ENV")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("development webpack-dev-server --config webpack.config.js\n\nThe CLI moved into a separate package: webpack-cli.\nPlease "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack-cli'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" addition to webpack itself to use the CLI.\n-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" When using npm: "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" webpack-cli -D\n-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" When using yarn: "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" webpack-cli -D\nmodule.js:529\n    throw err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ^\n\nError: Cannot "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),t._v(" module "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack-cli/bin/config-yargs'")]),t._v("\n    at Function.Module._resolveFilename "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module.js:527:15"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at Function.Module._load "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module.js:476:23"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at Module.require "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module.js:568:17"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at require "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("internal/module.js:11:18"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at Object."),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("anonymous"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("D:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("practice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("vue-webpack"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("node_modules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("webpack-dev-server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("webpack-dev-server.js:65:1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at Module._compile "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module.js:624:30"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at Object.Module._extensions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("js "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module.js:635:10"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at Module.load "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module.js:545:32"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at tryModuleLoad "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module.js:508:12"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at Function.Module._load "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module.js:500:3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" code ELIFECYCLE\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" errno "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" vue-webpack@1.0.0 dev: "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("cross-env "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NODE_ENV")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("development webpack-dev-server --config webpack.config.js"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" Exit status "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" Failed at the vue-webpack@1.0.0 dev script.\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" This is probably not a problem with npm. There is likely additional logging output above.\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" A complete log of this run can be found in:\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("     C:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Users"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("hk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("AppData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Roaming"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("npm-cache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("_logs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2018")]),t._v("-08-25T12_43_41_250Z-debug.log")])])]),s("ol",{attrs:{start:"2"}},[s("li",[s("p",[t._v("在安装了 webpack-dev-server 后, 将 devServer 配置的 hot 属性设置为true 后并没有生效, 后台查询知道在plugin里面要加入 new webpack.HotModuleReplacementPlugin()")])]),t._v(" "),s("li",[s("p",[t._v("vue-loader在较高的版本不仅要在module中使用vue-loader解析.vue文件, 还要导入 VueLoaderPlugin, 并且在plugins中调用 且引入的方法为 const { VueLoaderPlugin } = require('vue-loader'); (不要漏了大括号)")])]),t._v(" "),s("li",[s("p",[t._v("注意配置 webpack-dev-server 的时候, port 不要设置已经被占用的端口, 否者npm run dev会报错")])]),t._v(" "),s("li",[s("p",[t._v("要启用webpack的热更新功能不仅要把 devServer 对象的hot 设置为 true 还要在plugins中增加 一个插件: HotModuleReplacementPlugin")])])])])}),[],!1,null,null,null);"function"==typeof e&&e(p);a.default=p.exports}}]);