(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{114:function(e,t,a){"use strict";a.r(t);var s=a(0),n=function(e){var t,a,s,n,o=(s="post",n="reference",(t={}).internal=a=void 0,t.contentType="markdown",t.slug="20191005-commit-msg和changelog",t.content=a,t.title="Commit message 和 Change log 编写指南",t.layout=s,t.markdownHeadings=[{text:"Commit message 的作用",slug:"commit-message-的作用",level:2},{text:"Commit message 的格式",slug:"commit-message-的格式",level:2},{text:"生成 Change log",slug:"生成-change-log",level:2},{text:n,slug:n,level:2}],t.excerpt="<p>Git 每次提交代码，都要写 Commit message（提交说明），否则就不允许提交。</p>\n",t.createdAt=new Date(15702336e5),t.updatedAt=new Date(1570262749831),t.type=s,t.permalink="/posts/20191005-commit-msg和changelog.html",t.assets={},t.attributes=t,t.prevPost={title:"事件的节流和防抖",permalink:"/posts/20190929-事件的节流和防抖.html"},t.nextPost={title:"仿vue-cli搭建属于自己的脚手架",permalink:"/posts/20191006-仿vue-cli搭建属于自己的脚手架.html"},t),r=e.options.beforeCreate||[];e.options.beforeCreate=[function(){this.$page=o}].concat(r);["layout","transition"].forEach((function(t){var a=e.options.PageComponent;a&&(e.options[t]=a[t]),void 0===e.options[t]&&(e.options[t]=o[t])})),e.options.name="page-wrapper-"+o.slug.replace(/[^0-9a-z\-]/i,"-")},o=Object(s.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("layout-manager",[s("p",[e._v("Git 每次提交代码，都要写 Commit message（提交说明），否则就不允许提交。")]),e._v(" "),s("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":"shell"}},[s("pre",{pre:!0,attrs:{class:"saber-highlight-code language-shell"}},[s("code",{pre:!0,attrs:{class:"language-shell"}},[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" commit -m "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"hello world"')])])])]),s("p",[e._v("如果不写 -m 及后面的信息, 命令行会进入 vim 模式, 让你输入详细的 commit 信息")]),e._v(" "),s("p",[s("img",{attrs:{src:a(55),alt:"commit"}})]),e._v(" "),s("p",[e._v("一般来说, commit 信息应该清晰明了,")]),e._v(" "),s("p",[e._v("按照 Angular 开发团队的代码提交规范")]),e._v(" "),s("ul",[s("li",[e._v("[feat]: A new feature")]),e._v(" "),s("li",[e._v("[fix]: A bug fix")]),e._v(" "),s("li",[e._v("[docs]: Documentation only changes")]),e._v(" "),s("li",[e._v("[style]: Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)")]),e._v(" "),s("li",[e._v("[refactor]: A code change that neither fixes a bug nor adds a feature")]),e._v(" "),s("li",[e._v("[perf]: A code change that improves performance")]),e._v(" "),s("li",[e._v("[test]: Adding missing or correcting existing tests")]),e._v(" "),s("li",[e._v("[chore]: Changes to the build process or auxiliary tools and libraries such as documentation generation")])]),e._v(" "),s("p",[e._v("详情可 "),s("a",{attrs:{href:"https://docs.google.com/document/d/1QrDFcIiPjSLDn3EL15IJygNPiHORgU1_OOAqWjiDU5Y/edit#heading=h.greljkmo14y0",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考此处")])]),e._v(" "),s("h2",{attrs:{id:"commit-message-的作用"}},[e._v("Commit message 的作用")]),e._v(" "),s("p",[e._v("格式化的Commit message，有几个好处。")]),e._v(" "),s("p",[e._v("（1）提供更多的历史信息，方便快速浏览。")]),e._v(" "),s("p",[e._v("可以用以下命令来 快速的查看 commit message 的相关信息")]),e._v(" "),s("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":"shell"}},[s("pre",{pre:!0,attrs:{class:"saber-highlight-code language-shell"}},[s("code",{pre:!0,attrs:{class:"language-shell"}},[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" log --pretty"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("format:"),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"%C(auto)%h %ad | %C(auto)%s%d  %Cblue(%an)"')]),e._v(" --date"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("short")])])]),s("p",[e._v("（2）可以过滤某些commit（比如文档改动），便于快速查找信息。")]),e._v(" "),s("p",[e._v("（3）可以直接从commit生成Change log。")]),e._v(" "),s("h2",{attrs:{id:"commit-message-的格式"}},[e._v("Commit message 的格式")]),e._v(" "),s("p",[e._v("每次提交，Commit message 都包括三个部分：Header，Body 和 Footer。")]),e._v(" "),s("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":""}},[s("pre",{pre:!0,attrs:{class:"saber-highlight-code language-text"}},[s("code",{pre:!0,attrs:{class:"language-text"}},[e._v("<type>(<scope>): <subject>\n// 空一行\n<body>\n// 空一行\n<footer>")])])]),s("p",[e._v("其中，Header 是必需的，Body 和 Footer 可以省略。")]),e._v(" "),s("p",[e._v("不管是哪一个部分，任何一行都不得超过72个字符（或100个字符）。这是为了避免自动换行影响美观。")]),e._v(" "),s("h2",{attrs:{id:"生成-change-log"}},[e._v("生成 Change log")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/ajoslin/conventional-changelog",target:"_blank",rel:"noopener noreferrer"}},[e._v("conventional-changelog")]),e._v(" 就是生成 Change log 的工具，运行下面的命令即可。")]),e._v(" "),s("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":"shell"}},[s("pre",{pre:!0,attrs:{class:"saber-highlight-code language-shell"}},[s("code",{pre:!0,attrs:{class:"language-shell"}},[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" -g conventional-changelog\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" my-project\nconventional-changelog -p angular -i CHANGELOG.md -w")])])]),s("p",[e._v("如果你想生成所有发布的 Change log，要改为运行下面的命令。")]),e._v(" "),s("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":"shell"}},[s("pre",{pre:!0,attrs:{class:"saber-highlight-code language-shell"}},[s("code",{pre:!0,attrs:{class:"language-shell"}},[e._v("conventional-changelog -p angular -i CHANGELOG.md -w -r "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")])])])]),s("h2",{attrs:{id:"reference"}},[e._v("reference")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/angular/angular/commits/master",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/angular/angular/commits/master")])]),e._v(" "),s("p",[s("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html")])]),e._v(" "),s("p",[s("a",{attrs:{href:"https://www.npmjs.com/package/conventional-changelog-cli",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.npmjs.com/package/conventional-changelog-cli")])]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/ajoslin/conventional-changelog",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/ajoslin/conventional-changelog")])])])}),[],!1,null,null,null);"function"==typeof n&&n(o);t.default=o.exports},55:function(e,t,a){e.exports=a.p+"images/commit-vim.d2ba54ce.jpg"}}]);